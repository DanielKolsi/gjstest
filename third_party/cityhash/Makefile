PROJECT_ROOT = ../..
default: cityhash.a

# Tools and flags.
include $(PROJECT_ROOT)/tools.mk

######################################################
# Libraries
######################################################

# Objects to include in the library.
LIB_OBJS = city.o

cityhash.a : $(LIB_OBJS)
	rm -f $@
	$(AR) $(ARFLAGS) $@ $^

######################################################
# Tests
######################################################

# Additional objects to include in the test.
TEST_OBJS = city-test.o
TEST_DEPS =

city-test.bin : $(LIB_OBJS) $(TEST_OBJS) $(TEST_DEPS)
	$(CXX) $(CPPFLAGS) $(CXXFLAGS) $^ -o $@

test : city-test.bin
	./city-test.bin

######################################################
# House-keeping
######################################################

# depend target
OBJS = $(LIB_OBJS) $(TEST_OBJS)
include $(PROJECT_ROOT)/depend_target.mk

clean :
	rm -f *.o
	rm -f *.a

## Dependencies: (autogenerated) ##
city.o: city.cc ../../third_party/cityhash/city.h \
  ../../base/integral_types.h
city-test.o: city-test.cc city.h ../../base/integral_types.h
